<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dette Publique Fran√ßaise - Visualisation</title>
    <!-- Meta tags pour le partage social -->
    <meta property="og:title" content="Dette Publique Fran√ßaise - Visualisation en Temps R√©el">
    <meta property="og:description" content="Analyse document√©e des m√©canismes de la dette publique avec donn√©es INSEE">
    <meta property="og:image" content="https://projectpulse-source.github.io/dette-publique-france/image_couverture.PNG">
    <meta property="og:url" content="https://projectpulse-source.github.io/dette-publique-france/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="description" content="Visualisation en temps r√©el de la dette publique fran√ßaise bas√©e sur les donn√©es officielles de l'INSEE">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: #f5f5f5;
            color: #2d2d2d;
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 60px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 200;
            color: #1a1a1a;
            margin-bottom: 15px;
            letter-spacing: -1px;
        }

        .subtitle {
            color: #8a8a8a;
            font-size: 0.95rem;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .metric-card {
            background: #ffffff;
            border-radius: 16px;
            padding: 35px 30px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.04),
                0 2px 8px rgba(0, 0, 0, 0.06);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.06),
                0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .metric-value {
            font-size: 2.8rem;
            font-weight: 200;
            color: #1a1a1a;
            margin-bottom: 8px;
            line-height: 1;
        }

        .metric-label {
            color: #8a8a8a;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .metric-trend {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 500;
            background: #f8f8f8;
            color: #5a5a5a;
        }

        .trend-icon {
            font-size: 1rem;
        }

        .divider {
            width: 100%;
            height: 1px;
            background: #e5e5e5;
            margin: 50px 0;
        }

        .content-section {
            background: #ffffff;
            border-radius: 20px;
            padding: 50px;
            margin-bottom: 40px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.04),
                0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .chart-title {
            font-size: 1.5rem;
            font-weight: 300;
            color: #2d2d2d;
            margin-bottom: 30px;
            text-align: center;
            letter-spacing: -0.3px;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
            margin-bottom: 30px;
        }

        .share-section {
            text-align: center;
            background: #ffffff;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.04),
                0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .share-title {
            font-size: 1.3rem;
            font-weight: 300;
            color: #2d2d2d;
            margin-bottom: 20px;
            letter-spacing: -0.3px;
        }

        .share-subtitle {
            color: #8a8a8a;
            font-size: 0.9rem;
            margin-bottom: 30px;
        }

        .share-grid {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .share-button {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: #f8f8f8;
            color: #6a6a6a;
            border: 1px solid #f0f0f0;
        }

        .share-button:hover {
            transform: translateY(-3px);
            background: #ffffff;
            box-shadow: 
                0 8px 20px rgba(0, 0, 0, 0.08),
                0 4px 8px rgba(0, 0, 0, 0.06);
            color: #2d2d2d;
        }

        .share-button svg {
            width: 24px;
            height: 24px;
        }

        .footer-info {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid #f0f0f0;
            font-size: 0.85rem;
            color: #8a8a8a;
        }

        .loading {
            text-align: center;
            padding: 100px 20px;
            color: #8a8a8a;
            font-size: 1.1rem;
            font-weight: 300;
        }

        /* Nouveaux styles pour les indicateurs avanc√©s */
        .chart-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .chart-half {
            background: #ffffff;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.04),
                0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .chart-half-title {
            font-size: 1.3rem;
            font-weight: 300;
            color: #2d2d2d;
            margin-bottom: 25px;
            text-align: center;
            letter-spacing: -0.3px;
        }

        .chart-half-subtitle {
            font-size: 0.85rem;
            color: #8a8a8a;
            text-align: center;
            margin-bottom: 25px;
        }

        .chart-compact {
            position: relative;
            height: 300px;
        }

        .sparkline {
            height: 50px;
            margin-top: 15px;
        }

        .metric-detail {
            font-size: 1.2rem;
            color: #5a5a5a;
            margin-top: 8px;
            font-weight: 300;
        }

        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-top: 12px;
        }

        .badge-info {
            background: #f0f0f0;
            color: #6a6a6a;
        }

        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }

        .badge-success {
            background: #d4edda;
            color: #155724;
        }

        /* Styles pour les indicateurs avanc√©s */
        .badge-source {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #e5e5e5;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.75rem;
            color: #6a6a6a;
            font-weight: 500;
            letter-spacing: 0.5px;
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .advanced-indicators-grid {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 40px;
            margin: 40px 0;
        }

        .rg-display {
            margin: 25px 0;
        }

        .rg-values {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .rg-item {
            text-align: center;
        }

        .rg-label {
            display: block;
            font-size: 0.75rem;
            color: #8a8a8a;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }

        .rg-value {
            font-size: 2rem;
            font-weight: 200;
            color: #2d2d2d;
        }

        .rg-separator {
            font-size: 2rem;
            font-weight: 200;
            color: #8a8a8a;
            padding: 0 10px;
        }

        .rg-result {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 15px;
            background: #f8f8f8;
            border-radius: 12px;
        }

        .rg-equals {
            font-size: 1.5rem;
            color: #8a8a8a;
            font-weight: 300;
        }

        .rg-differential {
            font-size: 2.5rem;
            font-weight: 300;
            letter-spacing: -1px;
        }

        .status-pill {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            color: white;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .sparkline-container {
            margin: 20px 0 15px;
            padding: 10px;
            background: #fafafa;
            border-radius: 8px;
            height: 70px;
        }

        .echeancier-section {
            background: #ffffff;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.04),
                0 2px 8px rgba(0, 0, 0, 0.06);
            position: relative;
        }

        .echeancier-title {
            font-size: 1.3rem;
            font-weight: 300;
            color: #2d2d2d;
            margin-bottom: 10px;
        }

        .echeancier-subtitle {
            font-size: 0.85rem;
            color: #8a8a8a;
            margin-bottom: 25px;
        }

        .echeancier-chart {
            position: relative;
            height: 300px;
        }

        .action-bar {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 40px 0;
        }

        .btn-download, .btn-methodology {
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 400;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }

        .btn-download {
            background: white;
            border: 1px solid #e5e5e5;
            color: #4a4a4a;
        }

        .btn-download:hover {
            background: #f8f8f8;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .btn-methodology {
            background: #2d2d2d;
            color: white;
        }

        .btn-methodology:hover {
            background: #1a1a1a;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 992px) {
            .advanced-indicators-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
        }

        @media (max-width: 768px) {
            .badge-source {
                font-size: 0.65rem;
                padding: 3px 8px;
                top: 10px;
                right: 10px;
            }

            .rg-values {
                flex-direction: column;
                gap: 15px;
            }

            .rg-separator {
                display: none;
            }

            .rg-value {
                font-size: 1.5rem;
            }

            .rg-differential {
                font-size: 2rem;
            }

            .action-bar {
                flex-direction: column;
                padding: 0 20px;
            }

            .btn-download,
            .btn-methodology {
                width: 100%;
                justify-content: center;
            }
        }

        .book-showcase {
            display: grid;
            grid-template-columns: 220px 1fr;
            gap: 50px;
            align-items: center;
        }

        .book-cover {
            width: 220px;
            height: 320px;
            background: #f8f8f8;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #8a8a8a;
            font-size: 0.9rem;
            text-align: center;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.08),
                0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #f0f0f0;
            position: relative;
            overflow: hidden;
        }

        .book-cover::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, #e0e0e0, transparent);
        }

        .book-info h2 {
            font-size: 1.8rem;
            font-weight: 300;
            margin-bottom: 12px;
            color: #1a1a1a;
            letter-spacing: -0.5px;
        }

        .book-author {
            font-size: 1rem;
            color: #6a6a6a;
            margin-bottom: 25px;
            font-weight: 400;
        }

        .book-description {
            color: #5a5a5a;
            line-height: 1.8;
            margin-bottom: 20px;
            font-size: 0.95rem;
            font-weight: 300;
        }

        .book-features {
            display: flex;
            gap: 35px;
            margin-bottom: 35px;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #7a7a7a;
            font-size: 0.9rem;
        }

        .feature-icon {
            width: 20px;
            height: 20px;
            background: #f0f0f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #8a8a8a;
            font-size: 10px;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
        }

        .btn {
            padding: 14px 32px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 400;
            font-size: 0.95rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            letter-spacing: 0.3px;
        }

        .btn-primary {
            background: #2d2d2d;
            color: white;
            box-shadow: 
                0 4px 14px rgba(0, 0, 0, 0.15),
                0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .btn-primary:hover {
            background: #1a1a1a;
            transform: translateY(-2px);
            box-shadow: 
                0 8px 20px rgba(0, 0, 0, 0.2),
                0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .btn-secondary {
            background: #ffffff;
            color: #4a4a4a;
            border: 1px solid #e5e5e5;
        }

        .btn-secondary:hover {
            background: #f8f8f8;
            border-color: #d0d0d0;
        }

        /* Modal pour la pr√©face */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: #ffffff;
            margin: 3% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 900px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            padding: 40px 50px 30px;
            border-bottom: 1px solid #f0f0f0;
        }

        .modal-header h2 {
            font-size: 2rem;
            font-weight: 300;
            color: #1a1a1a;
            margin-bottom: 10px;
        }

        .modal-body {
            padding: 40px 50px;
            line-height: 1.8;
            color: #4a4a4a;
        }

        .modal-body h3 {
            font-size: 1.3rem;
            font-weight: 400;
            color: #2d2d2d;
            margin: 30px 0 15px;
        }

        .modal-body p {
            margin-bottom: 15px;
        }

        .modal-body strong {
            color: #2d2d2d;
        }

        .modal-sources {
            padding: 30px 50px 40px;
            background: #f8f8f8;
            border-radius: 0 0 20px 20px;
            font-size: 0.8rem;
            color: #6a6a6a;
            line-height: 1.6;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 2rem;
            font-weight: 200;
            color: #8a8a8a;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: #2d2d2d;
        }

        /* Tooltip pour explication */
        .tooltip-container {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #f0f0f0;
            color: #8a8a8a;
            font-size: 12px;
            margin-left: 8px;
            font-weight: 500;
        }

        .tooltip-text {
            visibility: hidden;
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.9);
            color: #fff;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 0.85rem;
            line-height: 1.6;
            width: 320px;
            z-index: 100;
            font-weight: 300;
            text-align: left;
        }

        .tooltip-text::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: rgba(0, 0, 0, 0.9) transparent transparent transparent;
        }

        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            animation: fadeIn 0.3s ease;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .metric-card {
            animation: fadeIn 0.6s ease backwards;
        }

        .metric-card:nth-child(1) { animation-delay: 0.1s; }
        .metric-card:nth-child(2) { animation-delay: 0.2s; }
        .metric-card:nth-child(3) { animation-delay: 0.3s; }
        .metric-card:nth-child(4) { animation-delay: 0.4s; }

        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: 20px 15px;
            }

            h1 {
                font-size: 1.8rem;
                margin-bottom: 8px;
            }

            .subtitle {
                font-size: 0.85rem;
            }

            .intro-message {
                padding: 20px 20px !important;
                margin-bottom: 30px;
            }

            .intro-message h2 {
                font-size: 1.1rem !important;
            }

            .intro-message p {
                font-size: 0.85rem !important;
                line-height: 1.6 !important;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .metric-card {
                padding: 25px 20px;
            }

            .content-section {
                padding: 30px 20px;
                margin-bottom: 25px;
            }

            .chart-wrapper {
                height: 250px;
            }

            .metric-value {
                font-size: 2rem;
            }

            .metric-label {
                font-size: 0.75rem;
            }

            .chart-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .chart-half {
                padding: 25px 20px;
            }

            .book-showcase {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 25px;
            }

            .book-cover {
                margin: 0 auto;
                width: 160px;
                height: 230px;
            }

            .book-info h2 {
                font-size: 1.4rem;
            }

            .book-description {
                font-size: 0.85rem;
            }

            .action-buttons {
                flex-direction: column;
                gap: 12px;
            }

            .btn {
                width: 100%;
                justify-content: center;
                padding: 12px 20px;
                font-size: 0.85rem;
            }

            .book-features {
                justify-content: center;
                flex-wrap: wrap;
                gap: 20px;
            }

            .feature {
                font-size: 0.8rem;
            }

            .modal-content {
                width: 95%;
                margin: 5% auto;
                max-height: 90vh;
            }

            .modal-header, .modal-body, .modal-sources {
                padding: 20px 15px;
            }

            .modal-header h2 {
                font-size: 1.5rem;
            }

            .modal-body {
                font-size: 0.85rem;
            }

            .tooltip-text {
                width: 250px;
                font-size: 0.75rem;
                left: 0;
                transform: translateX(0);
                margin-left: -20px;
            }

            .share-grid {
                gap: 12px;
            }

            .share-button {
                width: 48px;
                height: 48px;
            }

            .footer-info {
                font-size: 0.75rem;
            }

            .footer-info p {
                font-size: 0.7rem !important;
            }

            /* Badges plus petits sur mobile */
            .badge-source {
                font-size: 0.6rem;
                padding: 2px 6px;
                top: 8px;
                right: 8px;
            }

            /* Indicateurs r-g responsive */
            .rg-values {
                flex-direction: column;
                gap: 15px;
            }

            .rg-separator {
                display: none;
            }

            .rg-value {
                font-size: 1.5rem;
            }

            .rg-differential {
                font-size: 1.8rem;
            }

            /* Actions responsive */
            .action-bar {
                flex-direction: column;
                padding: 0 15px;
                margin: 30px 0;
            }

            .btn-download,
            .btn-methodology {
                width: 100%;
                justify-content: center;
                font-size: 0.85rem;
                padding: 12px;
            }

            /* Ajustements sp√©ciaux pour tr√®s petits √©crans */
            @media (max-width: 375px) {
                h1 {
                    font-size: 1.5rem;
                }

                .metric-value {
                    font-size: 1.8rem;
                }

                .book-cover {
                    width: 140px;
                    height: 200px;
                }
            }
        }

        /* Tablettes */
        @media (min-width: 769px) and (max-width: 1024px) {
            .container {
                padding: 30px;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
            }

            .chart-grid {
                grid-template-columns: 1fr;
            }

            .advanced-indicators-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .book-showcase {
                grid-template-columns: 180px 1fr;
                gap: 30px;
            }

            .book-cover {
                width: 180px;
                height: 260px;
            }
        }

        /* Desktop large */
        @media (min-width: 1400px) {
            .container {
                max-width: 1300px;
            }
        }

        /* Am√©lioration de l'accessibilit√© mobile */
        @media (hover: none) and (pointer: coarse) {
            /* Augmenter les zones tactiles */
            .btn {
                min-height: 48px;
            }

            .share-button {
                min-width: 48px;
                min-height: 48px;
            }

            /* D√©sactiver les effets de hover sur tactile */
            .metric-card:hover {
                transform: none;
            }

            .share-button:hover {
                transform: none;
            }
        }

        /* Support du mode paysage mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            body {
                padding: 10px 20px;
            }

            .header {
                margin-bottom: 20px;
            }

            .intro-message {
                margin-bottom: 20px;
                padding: 15px 20px !important;
            }

            .chart-wrapper {
                height: 200px;
            }
        }

        /* Social links pour les livres */
        .book-social {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .book-social-link {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s;
            background: #f8f8f8;
            color: #6a6a6a;
            border: 1px solid #f0f0f0;
        }

        .book-social-link:hover {
            transform: translateY(-2px);
            background: #ffffff;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            color: #2d2d2d;
        }

        .book-social-link svg {
            width: 18px;
            height: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Dette Publique Fran√ßaise</h1>
            <p class="subtitle" id="current-date">TABLEAU DE BORD ‚Äì OCTOBRE 2025</p>
        </header>

        <!-- MESSAGE D'INTRODUCTION SUR L'IMPORTANCE DE LA DETTE -->
        <div class="intro-message" style="background: #ffffff; border-left: 3px solid #d4af37; padding: 30px 35px; border-radius: 12px; margin-bottom: 40px; box-shadow: 0 4px 15px rgba(212, 175, 55, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04); position: relative;">
            <h2 style="font-size: 1.3rem; font-weight: 300; margin-bottom: 15px; color: #2d2d2d;">
                Pourquoi suivre la dette publique ?
            </h2>
            <p style="font-size: 0.95rem; line-height: 1.7; margin-bottom: 18px; color: #4a4a4a;">
                <strong>La dette structure int√©gralement notre syst√®me √©conomique et social.</strong> 
                Chaque euro emprunt√© aujourd'hui est un arbitrage sur demain : moins de lits d'h√¥pital, 
                des classes surcharg√©es, des services publics d√©grad√©s. En 2026, les int√©r√™ts de la dette 
                pourraient devenir le premier poste budg√©taire de l'√âtat ‚Äì devant l'√©ducation, la sant√©, la s√©curit√©.
            </p>
            <p style="font-size: 0.9rem; line-height: 1.6; color: #5a5a5a;">
                Ce tableau de bord rend visible cette m√©canique invisible : qui d√©tient la dette, 
                combien elle co√ªte, √† quelle vitesse elle cro√Æt. Des donn√©es officielles, 
                transparentes, v√©rifiables ‚Äì pour comprendre qui paie vraiment.
            </p>
            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #f0f0f0;">
                <a href="#book-section" style="color: #d4af37; text-decoration: none; display: inline-flex; align-items: center; gap: 10px; font-size: 0.9rem; font-weight: 400; transition: all 0.3s;">
                    D√©couvrir le livre "Dette Souveraine ‚Äì Qui paie vraiment ?"
                    <span style="display: inline-block; transform: translateX(0); transition: transform 0.3s;">‚Üí</span>
                </a>
            </div>
            <style>
                .intro-message a:hover {
                    color: #b8941f !important;
                }
                .intro-message a:hover span {
                    transform: translateX(5px) !important;
                }
            </style>
        </div>

        <div id="loading" class="loading">
            Chargement des donn√©es INSEE...
        </div>

        <div id="content" style="display: none;">
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="badge-source">APU ‚Ä¢ T2 2025</div>
                    <div class="metric-value" id="current-montant">--</div>
                    <div class="metric-label">Milliards d'euros</div>
                    <span class="metric-trend" id="trend-montant">
                        <span class="trend-icon">‚Üë</span> <span id="trend-montant-text">--</span>
                    </span>
                </div>

                <div class="metric-card">
                    <div class="badge-source">APU ‚Ä¢ T2 2025</div>
                    <div class="metric-value" id="current-pib">--</div>
                    <div class="metric-label">Ratio Dette/PIB</div>
                    <span class="metric-trend" id="trend-pib">
                        <span class="trend-icon">‚Üë</span> <span id="trend-pib-text">--</span>
                    </span>
                </div>

                <div class="metric-card">
                    <div class="badge-source">INSEE ‚Ä¢ 2025</div>
                    <div class="metric-value" id="per-capita">--</div>
                    <div class="metric-label">Dette par habitant
                        <span class="tooltip-container">
                            <span class="tooltip-icon">?</span>
                            <span class="tooltip-text">
                                <strong>Indicateur p√©dagogique</strong><br>
                                Calcul = encours APU / population totale INSEE<br>
                                ‚ö†Ô∏è Il ne s'agit pas d'une dette individuelle exigible
                            </span>
                        </span>
                    </div>
                    <span class="metric-trend" id="trend-capita">
                        <span class="trend-icon">‚Üë</span> <span id="trend-capita-text">--</span>
                    </span>
                </div>

                <div class="metric-card">
                    <div class="badge-source">PLF ‚Ä¢ 2025</div>
                    <div class="metric-value" id="interets-annuel">--</div>
                    <div class="metric-label">Mds‚Ç¨ d'int√©r√™ts/an
                        <span class="tooltip-container">
                            <span class="tooltip-icon">?</span>
                            <span class="tooltip-text">
                                <strong>Charge d'int√©r√™ts APU</strong><br>
                                Base: droits constat√©s (comptes nationaux)<br>
                                ~66 Mds‚Ç¨ APU / ~55 Mds‚Ç¨ √âtat seul
                            </span>
                        </span>
                    </div>
                    <span class="metric-trend">
                        <span class="trend-icon">‚Ä¢</span> <span>~2% du montant</span>
                    </span>
                </div>

                <div class="metric-card">
                    <div class="badge-source">APU ‚Ä¢ T2 2025</div>
                    <div class="metric-value" id="solde-primaire">--</div>
                    <div class="metric-label">
                        Solde primaire
                        <span class="tooltip-container">
                            <span class="tooltip-icon">?</span>
                            <span class="tooltip-text">
                                <strong>Le solde primaire</strong> correspond √† la diff√©rence entre les recettes publiques (imp√¥ts, cotisations) et les d√©penses publiques, <strong>hors paiement des int√©r√™ts</strong> de la dette.<br><br>
                                ‚Ä¢ APU, 12 mois glissants<br>
                                ‚Ä¢ ‚úì Positif = l'√âtat g√®re bien ses finances courantes<br>
                                ‚Ä¢ ‚úó N√©gatif = l'√âtat vit au-dessus de ses moyens
                            </span>
                        </span>
                    </div>
                    <div class="metric-detail" id="solde-primaire-mds">-- Md‚Ç¨ (12 derniers mois)</div>
                    <span class="badge badge-info" id="badge-solde">
                        Objectif ‚â• 0%
                    </span>
                </div>
            </div>

            <div class="divider"></div>

            <div class="chart-grid">
                <div class="chart-half">
                    <div class="badge-source">AFT ‚Ä¢ T2 2025</div>
                    <h3 class="chart-half-title">Qui d√©tient la dette ?</h3>
                    <p class="chart-half-subtitle">R√©partition par d√©tenteur ‚Ä¢ Valeur nominale</p>
                    <div class="chart-compact">
                        <canvas id="chartDetenteurs"></canvas>
                    </div>
                </div>

                <div class="chart-half">
                    <div class="badge-source">APU ‚Ä¢ 2020-2024</div>
                    <h3 class="chart-half-title">Solde primaire</h3>
                    <p class="chart-half-subtitle">√âvolution sur 5 ans (hors int√©r√™ts)</p>
                    <div class="chart-compact">
                        <canvas id="chartSoldePrimaire"></canvas>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <h2 class="chart-title">√âvolution de la dette en % du PIB</h2>
                <div class="chart-wrapper">
                    <canvas id="chartPIB"></canvas>
                </div>
            </div>

            <div class="content-section">
                <h2 class="chart-title">√âvolution de la dette en milliards d'euros</h2>
                <div class="chart-wrapper">
                    <canvas id="chartMontant"></canvas>
                </div>
            </div>

            <div class="divider"></div>

            <!-- NOUVEAUX INDICATEURS AVANC√âS -->
            <div class="advanced-indicators-grid">
                <!-- Indicateur r-g -->
                <div id="indicateur-rg">
                    <!-- Sera rempli par JavaScript -->
                </div>

                <!-- √âch√©ancier de remboursement -->
                <div class="echeancier-section">
                    <div class="badge-source">√âtat ‚Ä¢ AFT ‚Ä¢ Oct 2025</div>
                    <div class="echeancier-header">
                        <div>
                            <h3 class="echeancier-title">√âch√©ancier de remboursement</h3>
                            <p class="echeancier-subtitle">Amortissements MLT 2025-2029 (Mds‚Ç¨)</p>
                        </div>
                    </div>
                    <div class="echeancier-chart">
                        <canvas id="chartEcheancier"></canvas>
                    </div>
                </div>
            </div>

            <!-- Boutons d'action -->
            <div class="action-bar">
                <button class="btn-download" onclick="telechargerDonnees()">
                    üìä T√©l√©charger les donn√©es (CSV)
                </button>
                <a href="methodologie.html" class="btn-methodology" target="_blank">
                    üìñ Donn√©es & M√©thodologie
                </a>
            </div>

            <div class="divider"></div>

            <div class="content-section" id="book-section">
                <div class="book-showcase">
                    <div class="book-cover">
                        <img src="1760393721875_image.png" alt="Dette Souveraine - Qui paie vraiment" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'padding: 20px; line-height: 1.6;\'><div style=\'font-size: 1.1rem; font-weight: 500; margin-bottom: 10px;\'>DETTE<br>SOUVERAINE</div><div style=\'font-size: 0.8rem; color: #aaa; margin-bottom: 20px;\'>‚Äî</div><div style=\'font-size: 0.75rem; color: #aaa;\'>Qui paie<br>vraiment</div></div>';">
                    </div>
                    <div class="book-info">
                        <h2>Dette Souveraine ‚Äî Qui paie vraiment</h2>
                        <p class="book-author">Analyse document√©e des m√©canismes de la dette publique</p>
                        <p class="book-description">
                            Des centaines de millions d'euros d'int√©r√™ts de la dette chaque jour. Des dizaines de milliers de lits d'h√¥pital ferm√©s en quelques ann√©es. √âcoles surcharg√©es, justice √† bout. <strong>Qui paie vraiment la dette publique ‚Äî et surtout, qui d√©cide o√π l'addition retombe ?</strong>
                        </p>
                        <p class="book-description">
                            Ce livre rend visibles les m√©canismes de finances publiques qui organisent des transferts silencieux : cr√©anciers, int√©r√™ts de la dette, aust√©rit√©, agences de notation, √©carts de taux (spreads) qui ¬´ votent ¬ª avant les citoyens, r√¥le de la BCE (Banque centrale europ√©enne). R√©cits incarn√©s au travers de personnages concrets, explications pas √† pas, sans jargon, appuy√©s sur plusieurs centaines de sources (INSEE, OCDE, Banque de France).
                        </p>
                        <div class="book-features">
                            <div class="feature">
                                <div class="feature-icon">‚Ä¢</div>
                                <span>Donn√©es 2024-2025</span>
                            </div>
                            <div class="feature">
                                <div class="feature-icon">‚Ä¢</div>
                                <span>Sources officielles</span>
                            </div>
                            <div class="feature">
                                <div class="feature-icon">‚Ä¢</div>
                                <span>Sans jargon</span>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="https://amzn.eu/d/fBXX5BX" class="btn btn-primary" id="amazon-link-1" target="_blank">
                                Commander le livre
                            </a>
                            <a href="https://projectpulse-source.github.io/dette-publique-france/" class="btn btn-secondary" target="_blank">
                                Voir le site
                            </a>
                            <a href="#" class="btn btn-secondary" id="btn-preface-1">
                                Lire un extrait
                            </a>
                        </div>
                        <div class="book-social">
                            <a href="https://twitter.com/intent/tweet?text=Dette%20Souveraine%20-%20Qui%20paie%20vraiment%20https://projectpulse-source.github.io/dette-publique-france/" class="book-social-link" target="_blank" title="Partager sur X">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                </svg>
                            </a>
                            <a href="https://www.facebook.com/sharer/sharer.php?u=https://projectpulse-source.github.io/dette-publique-france/" class="book-social-link" target="_blank" title="Partager sur Facebook">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                                </svg>
                            </a>
                            <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://projectpulse-source.github.io/dette-publique-france/" class="book-social-link" target="_blank" title="Partager sur LinkedIn">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                </svg>
                            </a>
                            <a href="https://wa.me/?text=Dette%20Souveraine%20-%20Qui%20paie%20vraiment%20%3A%20Un%20livre%20essentiel%20pour%20comprendre%20la%20dette%20publique%20fran√ßaise%20https%3A%2F%2Fprojectpulse-source.github.io%2Fdette-publique-france%2F" class="book-social-link" target="_blank" title="Partager sur WhatsApp">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/>
                                    <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m5.894 16.606c-.252.633-.815 1.165-1.456 1.353-1.034.252-2.232.252-3.832-.252-3.832-1.213-6.313-4.464-6.503-4.67-.19-.206-1.543-2.055-1.543-3.92 0-1.865.967-2.785 1.31-3.165.343-.38.748-.475 1-.475h.723c.23 0 .538-.089.837.638.302.73 1.029 2.51 1.119 2.694.09.184.15.4.03.64-.118.24-.177.39-.354.6-.177.21-.373.468-.532.629-.16.16-.326.335-.14.635.187.3.83 1.37 1.78 2.22 1.223 1.095 2.253 1.434 2.572 1.594.32.16.506.135.693-.08.187-.215.8-.934.1015-1.254.215-.32.43-.267.723-.16s1.883.89 2.204 1.05c.32.16.533.24.613.37.08.13.08.74-.173 1.456z"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Deuxi√®me livre : ANTHROPIE -->
            <div class="content-section">
                <div class="book-showcase">
                    <div class="book-cover">
                        <img src="1760393894559_image.png" alt="ANTHROPIE - Ordre ici. Dette ailleurs" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'padding: 20px; line-height: 1.6;\'><div style=\'font-size: 1.1rem; font-weight: 500; margin-bottom: 10px;\'>ANTHROPIE</div><div style=\'font-size: 0.8rem; color: #aaa; margin-bottom: 20px;\'>‚Äî</div><div style=\'font-size: 0.75rem; color: #aaa;\'>Ordre ici.<br>Dette ailleurs</div></div>';">
                    </div>
                    <div class="book-info">
                        <h2>ANTHROPIE ‚Äî Ordre ici. Dette ailleurs</h2>
                        <p class="book-author">3 MILLIONS D'ANN√âES : UNE SEULE LOI</p>
                        <p class="book-description">
                            L'histoire de l'humanit√© n'est pas celle d'un progr√®s lin√©aire, qui nous m√®nerait vers une perfection toujours plus grande, mais bien le jeu d'un √©quilibre complexe o√π chaque √Ælot d'ordre que nous cr√©ons se paie en exportant son d√©sordre ‚Äî sa dette ‚Äî plus loin dans l'espace, plus tard dans le temps, et, trop souvent, sur d'autres √©paules.
                        </p>
                        <p class="book-description">
                            De Rome qui vidait ses provinces jusqu'√† nos algorithmes qui captent notre attention, ce transfert des √©quilibres est le fil rouge de l'histoire du monde, le moteur invisible de nos civilisations et de notre √©conomie, le contrat tacite qui nous oblige. C'est l'ANTHROPIE.
                        </p>
                        <div class="book-features">
                            <div class="feature">
                                <div class="feature-icon">‚Ä¢</div>
                                <span>Histoire mondiale</span>
                            </div>
                            <div class="feature">
                                <div class="feature-icon">‚Ä¢</div>
                                <span>√âquilibres complexes</span>
                            </div>
                            <div class="feature">
                                <div class="feature-icon">‚Ä¢</div>
                                <span>Analyse profonde</span>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="#" class="btn btn-primary" id="amazon-link-2" target="_blank">
                                Commander le livre
                            </a>
                            <a href="https://projectpulse-source.github.io/dette-publique-france/" class="btn btn-secondary" target="_blank">
                                Voir le site
                            </a>
                            <a href="#" class="btn btn-secondary" id="btn-preface-2">
                                Lire un extrait
                            </a>
                        </div>
                        <div class="book-social">
                            <a href="https://twitter.com/intent/tweet?text=ANTHROPIE%20-%20Ordre%20ici.%20Dette%20ailleurs%20https://projectpulse-source.github.io/dette-publique-france/" class="book-social-link" target="_blank" title="Partager sur X">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                </svg>
                            </a>
                            <a href="https://www.facebook.com/sharer/sharer.php?u=https://projectpulse-source.github.io/dette-publique-france/" class="book-social-link" target="_blank" title="Partager sur Facebook">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                                </svg>
                            </a>
                            <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://projectpulse-source.github.io/dette-publique-france/" class="book-social-link" target="_blank" title="Partager sur LinkedIn">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                </svg>
                            </a>
                            <a href="https://wa.me/?text=ANTHROPIE%20-%20Ordre%20ici.%20Dette%20ailleurs%20%3A%20Une%20analyse%20profonde%20de%20l%27histoire%20mondiale%20https%3A%2F%2Fprojectpulse-source.github.io%2Fdette-publique-france%2F" class="book-social-link" target="_blank" title="Partager sur WhatsApp">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/>
                                    <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m5.894 16.606c-.252.633-.815 1.165-1.456 1.353-1.034.252-2.232.252-3.832-.252-3.832-1.213-6.313-4.464-6.503-4.67-.19-.206-1.543-2.055-1.543-3.92 0-1.865.967-2.785 1.31-3.165.343-.38.748-.475 1-.475h.723c.23 0 .538-.089.837.638.302.73 1.029 2.51 1.119 2.694.09.184.15.4.03.64-.118.24-.177.39-.354.6-.177.21-.373.468-.532.629-.16.16-.326.335-.14.635.187.3.83 1.37 1.78 2.22 1.223 1.095 2.253 1.434 2.572 1.594.32.16.506.135.693-.08.187-.215.8-.934.1015-1.254.215-.32.43-.267.723-.16s1.883.89 2.204 1.05c.32.16.533.24.613.37.08.13.08.74-.173 1.456z"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="divider"></div>

            <div class="share-section">
                <h3 class="share-title">Partager ces informations</h3>
                <p class="share-subtitle">Donn√©es officielles INSEE ‚Ä¢ Mise √† jour trimestrielle</p>
                <div class="share-grid">
                    <a href="https://twitter.com/intent/tweet?text=Dette%20Publique%20Fran√ßaise%20:%20Visualisation%20en%20temps%20r√©el%20https://projectpulse-source.github.io/dette-publique-france/" target="_blank" class="share-button" title="X (Twitter)">
                        <svg fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://projectpulse-source.github.io/dette-publique-france/" target="_blank" class="share-button" title="Facebook">
                        <svg fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                    </a>
                    <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://projectpulse-source.github.io/dette-publique-france/" target="_blank" class="share-button" title="LinkedIn">
                        <svg fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </a>
                    <a href="https://wa.me/?text=Dette%20Publique%20Fran√ßaise%20%3A%20Visualisation%20en%20temps%20r√©el%20des%20donn√©es%20INSEE%20https%3A%2F%2Fprojectpulse-source.github.io%2Fdette-publique-france%2F" target="_blank" class="share-button" title="WhatsApp">
                        <svg fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.149-.67.149-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/>
                            <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m5.894 16.606c-.252.633-.815 1.165-1.456 1.353-1.034.252-2.232.252-3.832-.252-3.832-1.213-6.313-4.464-6.503-4.67-.19-.206-1.543-2.055-1.543-3.92 0-1.865.967-2.785 1.31-3.165.343-.38.748-.475 1-.475h.723c.23 0 .538-.089.837.638.302.73 1.029 2.51 1.119 2.694.09.184.15.4.03.64-.118.24-.177.39-.354.6-.177.21-.373.468-.532.629-.16.16-.326.335-.14.635.187.3.83 1.37 1.78 2.22 1.223 1.095 2.253 1.434 2.572 1.594.32.16.506.135.693-.08.187-.215.8-.934.1015-1.254.215-.32.43-.267.723-.16s1.883.89 2.204 1.05c.32.16.533.24.613.37.08.13.08.74-.173 1.456z"/>
                        </svg>
                    </a>
                    <a href="mailto:?subject=Dette%20Publique%20Fran√ßaise&body=Visualisation%20en%20temps%20r√©el%20des%20donn√©es%20INSEE%20https://projectpulse-source.github.io/dette-publique-france/" target="_blank" class="share-button" title="Email">
                        <svg fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                        </svg>
                    </a>
                </div>
                <div class="footer-info">
                    <strong>Source:</strong> Institut National de la Statistique et des √âtudes √âconomiques (INSEE)<br>
                    <span id="update-time">Derni√®re mise √† jour: --</span><br>
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #f0f0f0;">
                        <strong>Code & Donn√©es ‚Äì Transparence et droits d'usage</strong><br>
                        <p style="font-size: 0.8rem; line-height: 1.5; margin-top: 8px;">
                            Code source sous licence <strong>AGPL-3.0</strong> (toute version d√©ploy√©e doit publier ses modifications)<br>
                            Contenus et visuels sous licence <strong>CC BY-NC-SA 4.0</strong> (usage non-commercial avec attribution)<br>
                            Donn√©es brutes sous licences d'origine (INSEE/Etalab 2.0, AFT, BdF)<br>
                            <a href="https://github.com/ProjectPulse-source/dette-publique-france" style="color: #6a6a6a;" target="_blank">
                                Voir le code source, contribuer ou signaler un probl√®me sur GitHub
                            </a>
                        </p>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.75rem; color: #8a8a8a;">
                        P√©rim√®tre APU ‚Äì dette Maastricht | MAJ trimestrielle, latence ‚âà90j | 
                        <a href="methodologie.html" style="color: #8a8a8a;">M√©thodologie compl√®te</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Pr√©face Dette Souveraine -->
    <div id="modal-preface" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="close-modal">&times;</span>
            <div class="modal-header">
                <h2>Pr√©face</h2>
                <p style="color: #8a8a8a; font-size: 0.9rem;">Dette Souveraine ‚Äî Qui paie vraiment</p>
            </div>
            <div class="modal-body">
                <p>3h du matin, urgences d'un CHU de province. N√©ons blafards, pleurs √©touff√©s, sonneries incessantes.</p>
                
                <p>Un enfant br√ªlant de fi√®vre dans les bras de sa m√®re. Quatre heures d'attente. Brancard 18.</p>
                
                <p>Marie ‚Äî appelons-la ainsi ‚Äî traverse le couloir en courant. Une infirmi√®re pour tout le service, combien de patients ? Elle a arr√™t√© de compter apr√®s vingt. Plus loin, un interne qui tient debout par habitude.</p>
                
                <p>Pas un dysfonctionnement. Le fonctionnement.</p>
                
                <p>Quinze ans qu'elle est l√†. Depuis 2013, douze lits envol√©s. Moins de coll√®gues, plus de brancards, des nuits au bord de la rupture. Marie n'a ni l'air ni le temps de diss√©quer une loi de finances. Elle encaisse les r√©sultats.</p>
                
                <p>Et elle n'est pas seule.</p>
                
                <p>2013‚Äì2023 : dizaines de milliers de lits ferm√©s. Pendant ce temps : population vieillissante, maladies chroniques en hausse, burn-outs en s√©rie. Consultations psy satur√©es, arr√™ts maladie allong√©s, √©puisement normalis√©.</p>
                
                <p>Les besoins montent. Le syst√®me descend.</p>
                
                <p><strong>Pourquoi ?</strong></p>
                
                <p>Pas de scandale. Pas de complot. Pas d'erreur de gestion.</p>
                
                <p>Un arbitrage.</p>
                
                <p><strong>66 milliards d'euros par an.</strong></p>
                
                <p>Les int√©r√™ts de la dette publique en 2025. Pas le capital ‚Äî un √âtat ne rembourse jamais, il refinance en continu. Il paie l'int√©r√™t. Ind√©finiment.</p>
                
                <p>66 milliards : davantage que la Justice, la Police et l'Enseignement sup√©rieur r√©unis. Soit environ 1 600 euros par an et par foyer fiscal ‚Äî deux mois de courses alimentaires pour une famille moyenne, ou l'√©quivalent d'une trentaine de consultations sp√©cialis√©es introuvables √† l'h√¥pital en moins de quatre mois.</p>
                
                <p>Cet argent ne b√¢tit rien. Il r√©mun√®re le pass√©. Ne soigne personne, n'√©duque aucun enfant, ne r√©pare aucune route. Il paie les cr√©anciers : fonds de pension, banques, assureurs.</p>
                
                <p><strong>La dette : 3 400 milliards.</strong></p>
                
                <p>Marie attend des renforts. Vos imp√¥ts partent ailleurs.</p>
                
                <h3>Le Constat</h3>
                
                <p>Pendant des d√©cennies, une promesse simple a tenu : demain irait mieux qu'aujourd'hui. Nos parents vivaient mieux que nos grands-parents. Nous devions vivre mieux qu'eux. Nos enfants mieux encore.</p>
                
                <p>Cette promesse est morte.</p>
                
                <p>Marie gagne davantage aujourd'hui qu'en 2015. Pourtant, elle vit moins bien. Son loyer a augment√© plus vite que son salaire. Ses courses aussi. Sa mutuelle √©galement. Le pouvoir d'achat recule malgr√© l'augmentation nominale. Et avec lui, le sommeil. Les calculs constants. L'angoisse du d√©couvert. Ce n'est pas qu'une question d'argent : c'est une usure mentale permanente.</p>
                
                <p>Sa fille L√©a a 8 ans. √Ä sa naissance en 2017, la dette publique √©tait de 2 218 milliards d'euros. En huit ans, 1 198 milliards se sont ajout√©s - r√©partis m√©caniquement sur chaque nouveau-n√© ‚Äî le temps d'apprendre √† lire.</p>
                
                <p>Cette dette n'est pas abstraite. Elle produira des effets concrets toute sa vie : soit des imp√¥ts plus lourds pour la rembourser, soit des services publics plus d√©grad√©s si on ne la rembourse pas, soit les deux. L√©a paiera ‚Äî en argent ou en renoncements ‚Äî pour des d√©cisions prises avant sa naissance, par des gouvernements qu'elle n'a pas √©lus, au b√©n√©fice de cr√©anciers qu'elle ne rencontrera jamais.</p>
                
                <p>Ce ne sont pas des accidents. Ce sont des sympt√¥mes.</p>
                
                <p><strong>2026 marque un basculement</strong> : pour la premi√®re fois dans l'histoire r√©publicaine, les int√©r√™ts de la dette pourraient, selon la Cour des comptes, devenir le premier poste budg√©taire de l'√âtat. Devant l'√©cole de vos enfants. Devant la police. Devant tout le reste.</p>
                
                <p>Ce livre para√Æt maintenant parce qu'apr√®s, il sera peut-√™tre trop tard.</p>
                
                <p>Lorsqu'un syst√®me trahit sa promesse d'am√©lioration collective, comprendre pourquoi devient un devoir citoyen. D√©monter la machine pour voir comment elle fonctionne r√©ellement. Et surtout : dans l'int√©r√™t de qui.</p>
                
                <h3>L'Enqu√™te</h3>
                
                <p>Ce livre part d'une question simple : <strong>qui paie vraiment ?</strong> Une question qui en entra√Æne m√©caniquement une autre : qui d√©cide vraiment ?</p>
                
                <p>En remontant les flux financiers et les circuits du pouvoir, il r√©v√®le une m√©canique invisible : la dette publique n'est pas un probl√®me technique √† g√©rer, mais un instrument qui organise des transferts syst√©matiques. Du futur vers le pr√©sent. Des services publics vers les rentiers. De la d√©mocratie vers les march√©s.</p>
                
                <p>Pour analyser ces transferts, ce livre mobilise un concept nouveau, emprunt√© √† la physique et appliqu√© au social : <strong>l'anthropie</strong>. Les syst√®mes n'√©liminent pas le d√©sordre, ils le d√©placent. Cette grille transforme la question technique (¬´ Comment r√©duire le d√©ficit ? ¬ª) en question politique : qui paie, pourquoi, et au nom de quelle justice ?</p>
                
                <p>Cet ouvrage ne vous dira pas quoi penser. Il vous donnera les outils pour d√©cider vous-m√™me ce qui doit changer, et comment.</p>
                
                <p>Si vous travaillez plus pour vivre moins bien ; si vous voyez les services publics se d√©grader ; si vous payez mais ne d√©cidez plus ‚Äî alors ces pages vous montreront que votre situation n'est pas un √©chec personnel, mais l'aboutissement logique d'arbitrages politiques pr√©cis.</p>
                
                <p>Si vous avez pris votre retraite ‚Äî si vous avez connu l'ascension sociale de vos parents, la promesse tenue pour votre g√©n√©ration, et que vous voyez vos enfants d√©classer, vos petits-enfants s'endetter avant m√™me de travailler ‚Äî ce livre vous expliquera comment la machine s'est invers√©e. Pourquoi ce qui a fonctionn√© pour vous ne fonctionne plus pour eux.</p>
                
                <p>Si vous vous sentez ¬´ prot√©g√© ¬ª ‚Äî patrimoine stable, enfants scolaris√©s dans le priv√© ‚Äî ce livre vous montrera l'envers du d√©cor : une s√©curit√© pos√©e sur des fondations qui se fissurent. Aucun ordre ne dure quand il se nourrit du d√©sordre des autres.</p>
                
                <p>Observez la classe politique ‚Äî toutes tendances confondues. M√™me stupeur, m√™me masque de consternation : l'aveu tacite que les vieux leviers ne mordent plus sur le r√©el. Les cat√©gories se disloquent, les √©tiquettes se d√©collent. La machine qu'ils pr√©tendent piloter leur √©chappe.</p>
                
                <p>Si vous √™tes sceptique ‚Äî ¬´ encore un livre √† th√®se ¬ª ‚Äî lisez au moins les cent premi√®res pages. Vulgarisation sans concession √† la rigueur. Donn√©es v√©rifiables, sources cit√©es, m√©canismes d√©mont√©s pas √† pas.</p>
                
                <p>Et si vous tenez que cet ordre est juste et n√©cessaire, ce livre ne vous flattera pas : il vous confrontera.</p>
                
                <p>Marie ne sait pas encore que ce qui lui arrive n'est pas accidentel.</p>
                
                <p><strong>Vous voulez savoir pourquoi ?</strong></p>
                
                <p>Elle, elle n'a pas le choix.</p>
            </div>
            <div class="modal-sources">
                <strong>Sources :</strong> 43 500 lits ferm√©s 2013-2023 : DREES ER1315 / ‚âà60‚Äì66 Mds int√©r√™ts 2025 (APU) ; ‚âà55 Mds √âtat : Cour des comptes & PLF 2025 / 3 416 Mds dette T2 2025 : INSEE / ‚âà1 600 ‚Ç¨/foyer (66 Mds/41,0 M) : DGFiP / 2 218 Mds dette 2017 : INSEE / +1 198 Mds 2017‚ÜíT2 2025 : INSEE calcul / 165 Mds COVID (surcro√Æt de dette) : Budget.gouv.fr / Attente urgences 2023 : m√©diane >3 h : DREES / Ratios infirmi√®re/patients recommand√©s 6‚Äì8 ; d√©passements fr√©quents : SNPI & S√©nat / D√©lais sp√©cialistes 2024 : m√©diane ‚âà25‚Äì45 j (ophtalmo, dermato‚Ä¶) : SNOF-CSA & Doctolib / Tarifs consultation : 30 ‚Ç¨ MG ; 31,50 ‚Ç¨ sp√©cialit√©s secteur 1 : Ameli / Salaire infirmi√®re (exemple) 3 400 ‚Ç¨ : Emploi-Collectivit√©s grilles FPH / 237 200 m√©decins actifs 2025 : DREES / Premier poste 2026 (charge int√©r√™ts) : Cour des comptes projection / L√©a chronologie : arithm√©tique 2017‚Äì2025
            </div>
        </div>
    </div>

    <!-- Modal Extrait ANTHROPIE -->
    <div id="modal-anthropie" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="close-modal-anthropie">&times;</span>
            <div class="modal-header">
                <h2>Extrait</h2>
                <p style="color: #8a8a8a; font-size: 0.9rem;">ANTHROPIE ‚Äî Ordre ici. Dette ailleurs</p>
            </div>
            <div class="modal-body">
                <p>Le m√©canisme est limpide. 1971 r√©tablit un ordre de liquidit√© pour l'√©conomie-monde ‚Äî un oc√©an de dollars garantissant la continuit√© des √©changes, la profondeur des march√©s, la fluidit√© des prix ‚Äî et, par la m√™me op√©ration, transf√®re le d√©sordre sur d'autres rives. Ordre am√©ricain : financement illimit√©, d√©ficit sanctuaris√©, consommation insatiable. Dette mondialis√©e : volatilit√© chronique, crises √† r√©p√©tition, ajustements impos√©s, pauvret√© organis√©e. Privil√®ge exorbitant au centre = servitude mon√©taire √† la p√©riph√©rie. L'√©quation se chiffre en points de PIB coup√©s dans les budgets sociaux du Sud, en ann√©es d'√©cole disparues, en h√¥pitaux sans m√©dicaments, en classes moyennes lamin√©es lors de chaque envol√©e du dollar.</p>

                <p>On dira que tout empire a pr√©lev√© son tribut. Rome frappait l'aureus, Londres le sterling, Washington imprime la promesse. Mais jamais un h√©g√©mon n'avait trouv√© m√©canisme aussi √©l√©gant pour √™tre solvable √† l'infini avec l'argent des autres. L'empire est invisible ; le tribut, lui, passe chaque jour sur les √©crans : spreads, swaps, indices, vol, CDS. Et, dans l'ombre, les vies micro-ajust√©es au cycle d'un instrument que personne n'a √©lu.</p>

                <p>Reste la question que l'on repousse, parce qu'elle d√©pla√Æt : quand ce syst√®me tombe-t-il, et comment ? Hyperinflation, d√©flation, guerre mon√©taire, nouveau Bretton Woods, zombification √† la japonaise ? Les banques centrales saturent, √† bout de tours ; les √âtats apprennent √† vivre au-dessus d'une mer de dettes ; les citoyens perdent le fil, puis la foi. La gravit√© √©conomique ne s'abolit pas : on peut seulement la retarder ‚Äî en d√©pla√ßant son poids.</p>

                <p>Nixon, ce soir d'ao√ªt 1971, a ouvert la bo√Æte de Pandore. Depuis, les d√©mons dansent : bulles partout, croissance r√©elle √©maci√©e ; actifs stratosph√©riques, salaires m√©dianement immobiles ; richesse comptable, valeur sociale √©vapor√©e. ¬´ Temporairement ¬ª, promettait-il. Le plus rentable des mensonges. Le dollar papier r√®gne, parasite le monde, tient ses vassaux par la peur de l'alternative ‚Äî l'effondrement ou la guerre. Un jour, la foule tournera la t√™te et verra le roi nu. Ce jour-l√†, on comprendra le conte jusqu'au bout : la richesse sans valeur n'√©tait qu'un d√©placement de ruine. L'ordre mon√©taire de 1971 a restaur√© la fluidit√© du commerce et de la finance ; il a, dans le m√™me geste, install√© le chaos dans les bilans publics, dans les trajectoires individuelles du Sud, dans la g√©opolitique des dettes. On ne sauve pas un monde en imprimant du temps : on ne fait que remettre le d√©sordre √† demain ‚Äî et le facturer aux autres.</p>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <script src="dette-temps-reel.js"></script>
    <script src="indicateurs-avances.js"></script>
    <script>

        // Configuration des liens Amazon
        document.getElementById('amazon-link-1').href = '#'; // Lien Amazon pour Dette Souveraine (√† ajouter)
        document.getElementById('amazon-link-2').href = 'https://amzn.eu/d/4pAYT1d'; // Lien Amazon pour ANTHROPIE

        // Donn√©es INSEE int√©gr√©es (pour fonctionnement standalone)
        const DATA_INSEE = {
            "last_update": "2025-10-13T10:00:00",
            "data": [
                {"period": "2020-Q1", "dette_pib": 101.2, "dette_montant": 2438.0},
                {"period": "2020-Q2", "dette_pib": 115.1, "dette_montant": 2674.3},
                {"period": "2020-Q3", "dette_pib": 115.9, "dette_montant": 2714.7},
                {"period": "2020-Q4", "dette_pib": 115.0, "dette_montant": 2650.1},
                {"period": "2021-Q1", "dette_pib": 116.3, "dette_montant": 2739.9},
                {"period": "2021-Q2", "dette_pib": 114.4, "dette_montant": 2788.7},
                {"period": "2021-Q3", "dette_pib": 113.8, "dette_montant": 2813.9},
                {"period": "2021-Q4", "dette_pib": 112.9, "dette_montant": 2813.4},
                {"period": "2022-Q1", "dette_pib": 114.4, "dette_montant": 2901.8},
                {"period": "2022-Q2", "dette_pib": 113.6, "dette_montant": 2926.8},
                {"period": "2022-Q3", "dette_pib": 113.2, "dette_montant": 2960.7},
                {"period": "2022-Q4", "dette_pib": 111.4, "dette_montant": 2955.6},
                {"period": "2023-Q1", "dette_pib": 112.1, "dette_montant": 3020.8},
                {"period": "2023-Q2", "dette_pib": 111.3, "dette_montant": 3055.7},
                {"period": "2023-Q3", "dette_pib": 111.0, "dette_montant": 3095.6},
                {"period": "2023-Q4", "dette_pib": 109.8, "dette_montant": 3102.5},
                {"period": "2024-Q1", "dette_pib": 110.4, "dette_montant": 3160.8},
                {"period": "2024-Q2", "dette_pib": 112.1, "dette_montant": 3229.7},
                {"period": "2024-Q3", "dette_pib": 113.6, "dette_montant": 3301.4},
                {"period": "2024-Q4", "dette_pib": 113.2, "dette_montant": 3305.3},
                {"period": "2025-Q1", "dette_pib": 113.9, "dette_montant": 3345.4},
                {"period": "2025-Q2", "dette_pib": 115.6, "dette_montant": 3416.3}
            ]
        };

        // Donn√©es de r√©partition de la dette (T2 2025, source AFT/Banque de France)
        const REPARTITION_DETTE = {
            labels: ['Non-r√©sidents', 'Eurosyst√®me (APP/PEPP)', 'Assureurs FR', 'Banques FR', 'Autres r√©sidents'],
            data: [52.3, 18.7, 12.4, 8.6, 8.0], // en %
            colors: ['#2d2d2d', '#5a5a5a', '#8a8a8a', '#b0b0b0', '#d0d0d0']
        };

        // Donn√©es du solde primaire (% du PIB, estimations)
        const SOLDE_PRIMAIRE = {
            periods: ['2020', '2021', '2022', '2023', '2024'],
            data: [-6.8, -4.2, -3.1, -3.7, -3.9] // en % du PIB
        };
        
        // Configuration des graphiques
        const chartConfig = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    padding: 12,
                    borderRadius: 8,
                    titleFont: {
                        size: 13,
                        weight: '400'
                    },
                    bodyFont: {
                        size: 14,
                        weight: '500'
                    }
                }
            }
        };
        
        // Fonction pour charger et afficher les donn√©es
        async function loadData() {
            try {
                // Essayer de charger depuis le fichier externe
                let data;
                try {
                    const response = await fetch('data/dette_data.json');
                    if (response.ok) {
                        data = await response.json();
                    } else {
                        throw new Error('Fichier non trouv√©');
                    }
                } catch (fetchError) {
                    // Si le fichier n'existe pas, utiliser les donn√©es int√©gr√©es
                    console.log('Utilisation des donn√©es int√©gr√©es');
                    data = DATA_INSEE;
                }
                
                if (!data.data || data.data.length === 0) {
                    throw new Error('Pas de donn√©es disponibles');
                }
                
                // Cacher le loading et afficher le contenu
                document.getElementById('loading').style.display = 'none';
                document.getElementById('content').style.display = 'block';
                
                // Extraire les donn√©es
                const labels = data.data.map(d => formatPeriod(d.period));
                const dettePIB = data.data.map(d => d.dette_pib);
                const detteMontant = data.data.map(d => d.dette_montant);
                
                // Valeurs actuelles et pr√©c√©dentes
                const derniere = data.data[data.data.length - 1];
                const precedente = data.data[data.data.length - 2];
                const anneeAvant = data.data[data.data.length - 5]; // 4 trimestres avant
                
                // Afficher le montant
                document.getElementById('current-montant').textContent = Math.round(derniere.dette_montant).toLocaleString('fr-FR');
                
                // Afficher le ratio Dette/PIB avec %
                document.getElementById('current-pib').textContent = derniere.dette_pib.toFixed(1) + '%';
                
                // Calculer dette par habitant (population France ~67 millions)
                const perCapita = (derniere.dette_montant * 1000000000) / 67000000;
                document.getElementById('per-capita').textContent = Math.round(perCapita).toLocaleString('fr-FR') + '‚Ç¨';
                
                // Calculer les int√©r√™ts annuels (environ 2% du montant)
                const interetsAnnuel = derniere.dette_montant * 0.02;
                document.getElementById('interets-annuel').textContent = interetsAnnuel.toFixed(1);
                
                // Afficher le solde primaire
                const soldePrimaire = SOLDE_PRIMAIRE.data[SOLDE_PRIMAIRE.data.length - 1];
                document.getElementById('solde-primaire').textContent = soldePrimaire.toFixed(1) + '%';
                const soldePrimaireMds = (soldePrimaire / 100) * (derniere.dette_montant / (derniere.dette_pib / 100));
                document.getElementById('solde-primaire-mds').textContent = soldePrimaireMds.toFixed(1) + ' Md‚Ç¨ (12 derniers mois)';
                
                // Badge du solde primaire
                const badgeSolde = document.getElementById('badge-solde');
                if (soldePrimaire >= 0) {
                    badgeSolde.className = 'badge badge-success';
                    badgeSolde.textContent = 'Objectif atteint ‚úì';
                } else if (soldePrimaire > -2) {
                    badgeSolde.className = 'badge badge-warning';
                    badgeSolde.textContent = 'Tendance √† surveiller';
                } else {
                    badgeSolde.className = 'badge badge-warning';
                    badgeSolde.textContent = 'En dessous de l\'objectif';
                }
                
                // Calculer les trends
                const trendMontant = ((derniere.dette_montant - anneeAvant.dette_montant) / anneeAvant.dette_montant * 100).toFixed(1);
                const trendPIB = (derniere.dette_pib - anneeAvant.dette_pib).toFixed(1);
                const trendCapita = Math.round((perCapita - (anneeAvant.dette_montant * 1000000000) / 67000000));
                
                document.getElementById('trend-montant-text').textContent = `+${trendMontant}% cette ann√©e`;
                document.getElementById('trend-pib-text').textContent = `+${trendPIB} points`;
                document.getElementById('trend-capita-text').textContent = `+${trendCapita.toLocaleString('fr-FR')}‚Ç¨`;
                
                // Date de mise √† jour
                const updateDate = new Date(data.last_update);
                const periode = derniere.period.replace('-Q', ' T');
                document.getElementById('current-date').textContent = `TABLEAU DE BORD ‚Äî ${periode.toUpperCase()}`;
                document.getElementById('update-time').textContent = 
                    `Derni√®re mise √† jour: ${updateDate.toLocaleDateString('fr-FR')}`;
                
                // Cr√©er le graphique Dette/PIB
                const ctxPIB = document.getElementById('chartPIB').getContext('2d');
                new Chart(ctxPIB, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Dette / PIB (%)',
                            data: dettePIB,
                            borderColor: '#2d2d2d',
                            backgroundColor: 'rgba(45, 45, 45, 0.05)',
                            fill: true,
                            tension: 0.4,
                            borderWidth: 2,
                            pointRadius: 3,
                            pointBackgroundColor: '#2d2d2d',
                            pointHoverRadius: 6,
                            pointHoverBackgroundColor: '#2d2d2d'
                        }]
                    },
                    options: {
                        ...chartConfig,
                        scales: {
                            y: {
                                beginAtZero: false,
                                grid: {
                                    color: '#f0f0f0',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#8a8a8a',
                                    font: {
                                        size: 11
                                    },
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false,
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#8a8a8a',
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
                
                // Cr√©er le graphique Montant
                const ctxMontant = document.getElementById('chartMontant').getContext('2d');
                new Chart(ctxMontant, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Dette (Md‚Ç¨)',
                            data: detteMontant,
                            borderColor: '#5a5a5a',
                            backgroundColor: 'rgba(90, 90, 90, 0.05)',
                            fill: true,
                            tension: 0.4,
                            borderWidth: 2,
                            pointRadius: 3,
                            pointBackgroundColor: '#5a5a5a',
                            pointHoverRadius: 6,
                            pointHoverBackgroundColor: '#5a5a5a'
                        }]
                    },
                    options: {
                        ...chartConfig,
                        scales: {
                            y: {
                                beginAtZero: false,
                                grid: {
                                    color: '#f0f0f0',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#8a8a8a',
                                    font: {
                                        size: 11
                                    },
                                    callback: function(value) {
                                        return value.toLocaleString('fr-FR') + ' Md‚Ç¨';
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false,
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#8a8a8a',
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
                
                // Cr√©er le graphique Camembert - R√©partition de la dette
                const ctxDetenteurs = document.getElementById('chartDetenteurs').getContext('2d');
                new Chart(ctxDetenteurs, {
                    type: 'doughnut',
                    data: {
                        labels: REPARTITION_DETTE.labels,
                        datasets: [{
                            data: REPARTITION_DETTE.data,
                            backgroundColor: REPARTITION_DETTE.colors,
                            borderWidth: 0,
                            hoverOffset: 10
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    font: {
                                        size: 11
                                    },
                                    color: '#8a8a8a',
                                    usePointStyle: true,
                                    pointStyle: 'circle'
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                padding: 12,
                                borderRadius: 8,
                                callbacks: {
                                    label: function(context) {
                                        return context.label + ': ' + context.parsed + '%';
                                    }
                                }
                            }
                        }
                    }
                });
                
                // Cr√©er le graphique du Solde primaire
                const ctxSoldePrimaire = document.getElementById('chartSoldePrimaire').getContext('2d');
                new Chart(ctxSoldePrimaire, {
                    type: 'bar',
                    data: {
                        labels: SOLDE_PRIMAIRE.periods,
                        datasets: [{
                            label: 'Solde primaire (% PIB)',
                            data: SOLDE_PRIMAIRE.data,
                            backgroundColor: SOLDE_PRIMAIRE.data.map(v => v >= 0 ? '#d4edda' : '#f8d7da'),
                            borderColor: SOLDE_PRIMAIRE.data.map(v => v >= 0 ? '#28a745' : '#dc3545'),
                            borderWidth: 2,
                            borderRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                padding: 12,
                                borderRadius: 8,
                                callbacks: {
                                    label: function(context) {
                                        return 'Solde primaire: ' + context.parsed.y.toFixed(1) + '% du PIB';
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                grid: {
                                    color: '#f0f0f0',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#8a8a8a',
                                    font: {
                                        size: 11
                                    },
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false,
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#8a8a8a',
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
                
            } catch (error) {
                console.error('Erreur:', error);
                document.getElementById('loading').innerHTML = 
                    '<p style="color: #ff6b6b;">Erreur lors du chargement des donn√©es.</p>';
            }
        }
        
        // Formater la p√©riode (ex: "2025-Q1" -> "T1 2025")
        function formatPeriod(period) {
            if (period.includes('-Q')) {
                const [year, quarter] = period.split('-Q');
                return `T${quarter} ${year}`;
            }
            return period;
        }
        
        // Charger les donn√©es au d√©marrage
        loadData();

        // Initialiser les indicateurs avanc√©s
        document.addEventListener('DOMContentLoaded', function() {
            // Initialiser les indicateurs avanc√©s
            if (typeof IndicateursAvances !== 'undefined') {
                const indicateurs = new IndicateursAvances();
                indicateurs.creerIndicateurRG('indicateur-rg');
                indicateurs.creerEcheancier('chartEcheancier');
                
                // Stocker l'instance pour le t√©l√©chargement CSV
                window.indicateursInstance = indicateurs;
            }
        });

        // Fonction de t√©l√©chargement des donn√©es en CSV
        function telechargerDonnees() {
            // Cr√©er le CSV avec toutes les donn√©es
            let csv = 'Indicateur,P√©riode,Valeur,Unit√©,Source\n';
            
            // Ajouter les donn√©es principales
            const donnees = DATA_INSEE.data;
            const derniere = donnees[donnees.length - 1];
            
            csv += `Dette publique,${derniere.period},${derniere.dette_montant},Mds‚Ç¨,INSEE\n`;
            csv += `Dette/PIB,${derniere.period},${derniere.dette_pib},%,INSEE\n`;
            csv += `Dette par habitant,${derniere.period},${Math.round((derniere.dette_montant * 1000000000) / 67000000)},‚Ç¨,Calcul\n`;
            csv += `Charge d'int√©r√™ts,2025,${(derniere.dette_montant * 0.02).toFixed(1)},Mds‚Ç¨,Estimation\n`;
            
            // Ajouter l'historique
            donnees.forEach(d => {
                csv += `Dette historique,${d.period},${d.dette_montant},Mds‚Ç¨,INSEE\n`;
                csv += `Dette/PIB historique,${d.period},${d.dette_pib},%,INSEE\n`;
            });
            
            // Si les indicateurs avanc√©s sont disponibles
            if (window.indicateursInstance) {
                // Le module indicateurs-avances a sa propre m√©thode CSV
                window.indicateursInstance.genererCSV();
                return;
            }
            
            // Cr√©er le fichier √† t√©l√©charger
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `dette_publique_france_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Gestion du modal de pr√©face Dette Souveraine
        const modal = document.getElementById('modal-preface');
        const btnPreface = document.getElementById('btn-preface-1');
        const closeModal = document.getElementById('close-modal');

        if (btnPreface) {
            btnPreface.addEventListener('click', function(e) {
                e.preventDefault();
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            });
        }

        if (closeModal) {
            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
        }

        // Gestion du modal d'extrait ANTHROPIE
        const modalAnthropie = document.getElementById('modal-anthropie');
        const btnAnthropie = document.getElementById('btn-preface-2');
        const closeModalAnthropie = document.getElementById('close-modal-anthropie');

        if (btnAnthropie) {
            btnAnthropie.addEventListener('click', function(e) {
                e.preventDefault();
                modalAnthropie.style.display = 'block';
                document.body.style.overflow = 'hidden';
            });
        }

        if (closeModalAnthropie) {
            closeModalAnthropie.addEventListener('click', function() {
                modalAnthropie.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
        }

        window.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
            if (e.target === modalAnthropie) {
                modalAnthropie.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
    </script>
</body>
</html>
